<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expanding Real-Time Calendar</title>
    <!-- Load Tailwind CSS for utility classes and aesthetics -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Calender */
        /*
        Custom CSS for the Expansion, Transition, and Blur Effect
        */

        :root {
            --calendar-size: 150px; /* The mandated default size */
            --expanded-width: 90vw;
            --expanded-height: 90vh;
        }

        body {
            /* Initial centering setup from the user's request */
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            background-color: #d32e2e;
            font-family: 'Inter', sans-serif;
            transition: background-color 0.5s ease;
            position: relative; /* Needed for the backdrop */
        }

        /* 1. Base Calendar Style (200x200px) */
        .calendar {
            height: var(--calendar-size);
            width: var(--calendar-size);
            background-color: #795548; /* Brown color retained for the base */
            border-radius: 1rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            position: relative;
            z-index: 100; /* Ensure it is above the backdrop */

            /* CSS Transitions for smooth expansion */
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);

            /* Hide full content initially */
            overflow: hidden;
            display: flex;
            flex-direction: column;
            color: white;
            padding: 1rem;
        }

        /* 2. Expanded State */
        .calendar.expanded {
            width: var(--expanded-width);
            max-width: 700px; /* Cap the size on very large screens */
            height: var(--expanded-height);
            max-height: 600px;
            background-color: #ffffff; /* White background when expanded */
            color: #333;
            cursor: default;
            padding: 1.5rem;
            /* Flex layout for the full calendar structure */
            display: grid;
            grid-template-rows: auto 1fr;
            gap: 1rem;
        }

        /* 3. Blurred Backdrop Overlay */
        .backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            background-color: rgba(0, 0, 0, 0.2); /* Semi-transparent overlay */
            transition: opacity 0.5s ease, visibility 0s 0.5s;
        }

        /* Activate backdrop when the calendar is expanded */
        .calendar.expanded ~ .backdrop {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.5s ease;
            /* Apply the blur effect to the background */
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        /* 4. Internal Content Styling */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
            text-align: center;
            font-size: 0.9rem;
            user-select: none;
        }

        .calendar-day, .calendar-date {
            padding: 0.5rem 0;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
        }

        .calendar-day {
            font-weight: 700;
            color: #795548;
            font-size: 0.8rem;
        }

        .calendar-date {
            background-color: #eee;
            color: #444;
            transition: background-color 0.2s;
        }

        .calendar-date:hover {
            background-color: #e0e0e0;
        }

        .calendar-date.current-date {
            background-color: #ff5722; /* Orange for today */
            color: white;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(255, 87, 34, 0.5);
        }

        /* Hide the full calendar content when small */
        .calendar-full-content {
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s, transform 0.3s;
            pointer-events: none;
            flex-grow: 1;
            display: none; /* Hide grid when small */
        }

        .calendar.expanded .calendar-full-content {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
            display: flex; /* Show grid when expanded */
            flex-direction: column;
            gap: 1rem;
        }

        /* Base 200x200 view (Shows only date/month/year) */
        .calendar-summary {
            text-align: center;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: opacity 0.3s;
        }

        .calendar.expanded .calendar-summary {
            opacity: 0;
        }
        .calendar-summary h2 {
             font-size: 3rem;
             line-height: 1;
             font-weight: 800;
             margin: 0;
        }
        .calendar-summary p {
            margin-top: 0.25rem;
            font-size: 1rem;
            font-weight: 500;
        }

        /* Responsive adjustments for mobile */
        @media (max-width: 600px) {
            :root {
                --expanded-width: 95vw;
                --expanded-height: 80vh;
            }
        }
    </style>
</head>
<body>

    <div class="calendar" id="calendar">
        <!-- Summary View (Visible when 200x200) -->
        <div class="calendar-summary">
            <h2 id="summary-date">28</h2>
            <p id="summary-month-year">Nov 2025</p>
        </div>

        <!-- Full View (Visible when expanded) -->
        <div class="calendar-full-content">
            <!-- Header: Month and Year -->
            <div class="flex justify-between items-center text-xl font-bold mb-2">
                <button onclick="changeMonth(-1)" class="p-2 rounded-full hover:bg-gray-100 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left"><path d="m15 18-6-6 6-6"/></svg>
                </button>
                <h3 id="current-month-year" class="text-gray-800">November 2025</h3>
                <button onclick="changeMonth(1)" class="p-2 rounded-full hover:bg-gray-100 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
                </button>
            </div>
            
            <!-- Calendar Grid -->
            <div id="calendar-grid" class="calendar-grid">
                <!-- Day names are static -->
                <div class="calendar-day">Sun</div>
                <div class="calendar-day">Mon</div>
                <div class="calendar-day">Tue</div>
                <div class="calendar-day">Wed</div>
                <div class="calendar-day">Thu</div>
                <div class="calendar-day">Fri</div>
                <div class="calendar-day">Sat</div>
                
                <!-- Dates will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- The Backdrop (Will apply the blur effect when visible) -->
    <div class="backdrop" onclick="toggleCalendar(false)"></div>

    <script>
        const calendarEl = document.getElementById('calendar');
        const summaryDateEl = document.getElementById('summary-date');
        const summaryMonthYearEl = document.getElementById('summary-month-year');
        const currentMonthYearEl = document.getElementById('current-month-year');
        const calendarGridEl = document.getElementById('calendar-grid');

        let currentDate = new Date();
        const today = new Date();

        // Utility function to get the first day of the month and total days
        function getCalendarData(date) {
            const year = date.getFullYear();
            const month = date.getMonth();

            const firstDayOfMonth = new Date(year, month, 1).getDay(); // 0 for Sunday, 1 for Monday, etc.
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            return { year, month, firstDayOfMonth, daysInMonth };
        }

        // Function to render the dates for the current month
        function renderCalendar() {
            const { year, month, firstDayOfMonth, daysInMonth } = getCalendarData(currentDate);

            // Update header and summary views
            const monthName = currentDate.toLocaleDateString('en-US', { month: 'long' });
            const shortMonthName = currentDate.toLocaleDateString('en-US', { month: 'short' });

            currentMonthYearEl.textContent = `${monthName} ${year}`;
            
            // Update summary view (always shows today's date, regardless of expanded view month)
            summaryDateEl.textContent = today.getDate();
            summaryMonthYearEl.textContent = `${today.toLocaleDateString('en-US', { month: 'short' })} ${today.getFullYear()}`;


            // Clear previous dates (but keep the day names)
            while (calendarGridEl.children.length > 7) {
                calendarGridEl.removeChild(calendarGridEl.lastChild);
            }

            // 1. Add leading empty placeholders (for days before the 1st)
            for (let i = 0; i < firstDayOfMonth; i++) {
                const emptyCell = document.createElement('div');
                // Tailwind class w-full h-10 for size
                emptyCell.className = 'w-full h-10';
                calendarGridEl.appendChild(emptyCell);
            }

            // 2. Add actual dates
            for (let day = 1; day <= daysInMonth; day++) {
                const dateCell = document.createElement('div');
                dateCell.textContent = day;
                dateCell.className = 'calendar-date';
                
                // Check if this date is today
                if (year === today.getFullYear() && 
                    month === today.getMonth() && 
                    day === today.getDate()) {
                    dateCell.classList.add('current-date');
                }

                calendarGridEl.appendChild(dateCell);
            }
        }

        // Function to change the displayed month
        window.changeMonth = function(delta) {
            currentDate.setMonth(currentDate.getMonth() + delta);
            renderCalendar();
        }

        // Function to toggle the expanded state
        window.toggleCalendar = function(open) {
            // Determine if we are expanding (true) or collapsing (false/toggle)
            const shouldExpand = (typeof open === 'boolean') ? open : !calendarEl.classList.contains('expanded');

            if (shouldExpand) {
                // Expand
                calendarEl.classList.add('expanded');
                // Re-render to ensure the expanded calendar view is up-to-date
                renderCalendar();
            } else {
                // Collapse
                calendarEl.classList.remove('expanded');
            }
        };

        // Initialize listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Initial render
            renderCalendar();

            // Click listener on the calendar itself to expand
            calendarEl.addEventListener('click', (event) => {
                // Only expand if clicking the calendar itself, not internal buttons
                if (!calendarEl.classList.contains('expanded')) {
                    toggleCalendar(true);
                }
            });
        });

    </script>
</body>
</html>